workflows:
  android-release:
    name: Android Release Build
    max_build_duration: 120
    environment:
      flutter: stable
      vars:
        PACKAGE_NAME: "com.example.myapp" # Ersetze mit deinem Paketnamen
      groups:
        - google_credentials # Stelle sicher, dass diese Env-Var existiert

    working_directory: app  # WICHTIG: Das gibt an, wo sich dein Flutter-Projekt befindet!

    scripts:
      - echo "ðŸ“¦ Running Flutter Clean"
      - flutter clean
      - echo "ðŸ“¦ Running Flutter Pub Get"
      - flutter pub get
      - echo "ðŸ”§ Building APK"
      - flutter build apk --release

    artifacts:
      - build/*/outputs//.apk # Stellt sicher, dass das APK gespeichert wird

    publishing:
      android:
        artifacts:
          - app-release.apk
        signing:
          credentials: $CM_KEYSTORE_PATH
          keystore_password: $CM_KEYSTORE_PASSWORD
          key_alias: $CM_KEY_ALIAS
          key_password: $CM_KEY_PASSWORD
